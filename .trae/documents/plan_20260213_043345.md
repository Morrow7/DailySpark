# 移动端功能增强计划

我将为您实现单词批量导入和聊天功能升级，具体方案如下：

## 1. 单词页面：批量导入功能
### 技术实现
- **核心库**: 引入 `expo-document-picker` (文件选择)、`xlsx` (解析Excel/CSV)、`@react-native-async-storage/async-storage` (本地持久化存储)。
- **数据管理**: 创建 `WordStorage` 服务，用于管理单词数据的增删改查与持久化，替代纯静态 Mock 数据。

### 功能流程
1.  **导入入口**: 在单词页顶部添加“导入”按钮。
2.  **文件解析**: 支持选择 `.json`, `.xlsx`, `.csv` 文件。
3.  **数据清洗**:
    -   验证必填字段 (单词, 音标, 释义)。
    -   自动去重 (基于单词拼写)。
    -   生成导入报告 (成功数量, 失败原因)。
4.  **状态同步**: 导入成功后自动刷新列表，并持久化保存到本地。

## 2. 聊天页面：全能语言助手
### 核心模块
1.  **多语言支持**:
    -   新增“语言设置”菜单，支持 English, Chinese, Spanish, Japanese, French 等切换。
    -   调整 TTS (语音合成) 发音引擎以匹配当前选定语言。
2.  **文本翻译**:
    -   集成翻译模式：输入框旁增加“翻译”按钮。
    -   利用现有 AI 接口实现意图识别翻译 (Prompt Engineering)。
3.  **语音交互 (STT & TTS)**:
    -   **TTS (输出)**: 优化现有 `expo-speech`，支持根据消息语言自动切换发音人。
    -   **STT (输入)**: 实现录音 UI 交互 (按住说话)，并模拟语音转文字流程 (注: 真实 STT 需要额外云端 API，将预留接口位置)。
4.  **聊天记录管理**:
    -   本地存储: 使用 `AsyncStorage` 自动保存聊天历史。
    -   历史回溯: 重新打开 App 时自动加载上次对话。

## 执行步骤
1.  **环境配置**: 安装所需依赖 (`document-picker`, `xlsx`, `async-storage` 等)。
2.  **单词功能**: 重构 `WordsScreen` 数据层，实现 `Storage` 逻辑与导入 UI。
3.  **聊天升级**: 改造 `ChatScreen`，增加语言状态管理、持久化逻辑及翻译/语音控件。
4.  **验证**: 在模拟器中测试导入 Excel 文件及聊天记录回显。
